<!--
/*
 * Copyright (c) 2016 GE Global Research. All rights reserved.
 *
 * The copyright to the computer software herein is the property of
 * GE Global Research. The software may be used and/or copied only
 * with the written permission of GE Global Research or in accordance
 * with the terms and conditions stipulated in the agreement/contract
 * under which the software has been supplied.
 */
 -->
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../polymer-font-awesome/polymer-font-awesome.html"/>
<link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html">
<link rel="import" href="../iron-scroll-target-behavior/iron-scroll-target-behavior.html">
<link rel="import" href="px-navbar-behavior.html">
<!--
<p>
  For demo visit <a href="demo.html" target="_blank">Full demo here</a> or <a href="mobile-demo.html" target="_blank">Mobile demo here</a>
</p>

The `px-navbar` enables navigation through an information hierarchy and, optionally, management of screen contents.

### Usage

```
<px-navbar id="navbar1">
	<div left>

	</div>
	<div center>

  </div>
	<div right>

	</div>
</px-navbar>
```


### Styling

Custom property | Description | Default
------------ | ------------- | ------------
`--px-navbar`   | Style mixin to be applied to the element | null
`--px-navbar-color` | The font color | $black
`--px-navbar-border-bottom` | The border bottom style | null
`--px-navbar-background-color` | The background color | $white
`--px-navbar-title-color` | The title font color | $black
`--px-navbar-subtitle-color` | The subtitle font color | $black

@element px-navbar.html
@blurb px-navbar
@demo demo.html
@demo mobile-demo.html
@homepage index.html
-->
<dom-module id="px-navbar">
	<link rel="import" type="css" href="css/px-navbar.css">
	<style media="screen">
		:host {
			display: block;
		}
		:host .navbar {
			@apply(--px-navbar);
		}
	</style>
	<template strip-whitespace>
		<nav id="navbar" class="navbar">
			<div class="navbar__inner">
				<div id="left" class="navbar__left">
					<template is="dom-if" if="{{drawer}}">
						<button class="navbar__button flex flex--center" drawer-toggle>
							<iron-icon icon="fa:fa-bars"></iron-icon>
						</button>
					</template>
					<template is="dom-if" if="{{!back}}">
						<content id="leftContent" select="[left]"></content>
					</template>
					<template is="dom-if" if="{{back}}">
						<button class="navbar__button" on-tap="_handleBackClick">
							<iron-icon icon="fa:fa-angle-left"></iron-icon>
							<span>{{backLabel}}</span>
						</button>
					</template>
				</div>
				<div class="navbar__center">
					<span class="navbar__title">
						<span hidden="{{!title}}">{{title}}</span>
						<content select="[title]"></content>
					</span>
					<span class="navbar__subtitle">
						<span hidden="{{!subtitle}}">{{subtitle}}</span>
						<content select="[subtitle]"></content>
					</span>
					<content select="[center]"></content>
				</div>
				<content select="[right]"></content>
				<content id="navbarContent" select="*, [content]"></content>
			</div>
		</nav>
	</template>
	<script>
		Polymer({
			is: 'px-navbar',
			behaviors: [
				Polymer.IronScrollTargetBehavior, Polymer.IronResizableBehavior, pxNavbarBehavior
			],
			properties: {
				/**
				 * The sub-title to display.
					*/
				subtitle: {
					type: String
				},
				/**
				 * The title to display.
				 */
				title: {
					type: String
				},
				/**
				 * The #id of the view container.
				 */
				viewContainer: {
					type: String,
					notify: true,
					reflectToAttribute: true
				},
				/**
				 * Fix the navbar to the top.
				 */
				fixed: {
					type: Boolean,
					value: false
				},
				/**
				 * Add a shadow to the navbar
				 */
				shadow: {
					type: Boolean,
					value: false
				},
				/**
				 * The current state of the navbar
				 */
				isHidden: {
					type: Boolean,
					value: false,
					reflectToAttribute: true,
					observer: '_isHiddenHandler'
				},
				/**
				 * Auto Hide the navbar on user scroll down, reveal on tap or scroll up.
				 */
				autoHide: {
					type: Boolean,
					value: false,
					observer: '_handleAutoHide'
				},
				/**
				 * The view containers instance.
				 */
				views: {
					type: Object
				},
				/**
				 * The drawer id.
				 */
				drawer: {
					type: Object
				},
				/**
				 * To show the back button or not.
				 */
				back: {
					type: Boolean,
					value: false,
					reflectToAttribute: true
				},
				/**
				 * Disable the back button when attached to a view container.
				 */
				disableBack: {
					type: Boolean,
					value: false,
					reflectToAttribute: true
				},
				/**
				 * The label for the back button.
				 */
				backLabel: {
					type: String,
					value: 'Back'
				}
			},
			_throttleTime: 100,
			_delta: 5,
			_scrollCurrent: 0,
			listeners: {
				'iron-resize': '_resizeHandler'
			},
			observers: ['resetLayout(isAttached, fixed)'],
			resetLayout: function () {},
			getHeight: function () {
				return this.$.navbar.offsetHeight;
			},
			_resizeHandler: function () {
				this.resetLayout();
			}
		});
	</script>
</dom-module>
