<!--
/*
 * Copyright (c) 2016 GE Global Research. All rights reserved.
 *
 * The copyright to the computer software herein is the property of
 * GE Global Research. The software may be used and/or copied only
 * with the written permission of GE Global Research or in accordance
 * with the terms and conditions stipulated in the agreement/contract
 * under which the software has been supplied.
 */
 -->
<script type="text/javascript">
	/**
	 * Behavior that manages the px-navbar
	 *
	 * @polymerBehavior
	 */
	var pxNavbarBehavior = {};
	var elHeight = 0,
		elTop = 0,
		dHeight = 0,
		wHeight = 0,
		wScrollCurrent = 0,
		wScrollBefore = 0,
		wScrollDiff = 0;
	pxNavbarBehavior._scrollHandler = function (e) {
		if (this._height === 0) {
			return;
		}
		if (!this.autoHide) {
			return;
		}
		var element = this.$.navbar;
		elHeight = element.offsetHeight;
		dHeight = document.body.offsetHeight;
		wHeight = window.innerHeight;
		wScrollCurrent = window.pageYOffset;
		wScrollDiff = wScrollBefore - wScrollCurrent;
		elTop = parseInt(window.getComputedStyle(element).getPropertyValue('top')) + wScrollDiff;
		// scrolled to the very top; element sticks to the top
		if (wScrollCurrent <= 0) {
			element.style.top = '0px';
			// scrolled up; element slides in
		} else if (wScrollDiff > 0) {
			element.style.top = (elTop > 0
				? 0
				: elTop) + 'px';
		} else if (wScrollDiff < 0) {
			// scrolled to the very bottom; element slides in
			if (wScrollCurrent + wHeight >= dHeight - elHeight) {
				element.style.top = ((elTop = wScrollCurrent + wHeight - dHeight) < 0
					? elTop
					: 0) + 'px';
			} else {
				// scrolled down; element slides out
				element.style.top = (Math.abs(elTop) > elHeight
					? -elHeight
					: elTop) + 'px';
			}
		}
		wScrollBefore = wScrollCurrent;
	};
</script>
